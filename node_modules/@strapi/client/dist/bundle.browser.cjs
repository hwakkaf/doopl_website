"use strict";var t=require("debug");class e{_options;constructor(t){this._options=t,this.preflightValidation()}}class r extends Error{constructor(t=void 0,e="An error occurred in the Strapi client. Please check the logs for more information."){super(e),this.cause=t}}class n extends r{constructor(t=void 0,e="Some of the provided values are not valid."){super(t,e)}}class o extends r{constructor(t=void 0,e="Could not initialize the Strapi Client"){super(t,e)}}class i extends Error{}class a extends i{constructor(t){super(`Could not parse invalid URL: "${t}"`)}}class s extends Error{name="HTTPError";response;request;constructor(t,e){const r=`${t.status?.toString()??""} ${t.statusText??""}`.trim();super(`Request failed with ${r?`status code ${r}`:"an unknown error"}: ${e.method} ${e.url}`),this.response=t,this.request=e}}class u extends s{name="HTTPAuthorizationError"}class l extends s{name="HTTPNotFoundError"}class c extends s{name="HTTPBadRequestError"}class p extends s{name="HTTPInternalServerError"}class f extends s{name="HTTPForbiddenError"}class y extends s{name="HTTPTimeoutError"}const d=t("strapi:auth:provider:api-token");class h extends e{static identifier="api-token";constructor(t){super(t)}get name(){return h.identifier}get _token(){return this._options.token}preflightValidation(){if(d("validating provider configuration"),"string"!=typeof this._token||0===this._token.trim().length)throw d("invalid api token provided: %o (%o)",this._token,typeof this._token),new n(`A valid API token is required when using the api-token auth strategy. Got "${this._token}"`);d("provider configuration validated successfully")}authenticate(){return d("no authentication step is required for the %o auth strategy, skipping",this.name),Promise.resolve()}get headers(){return{Authorization:`Bearer ${this._token}`}}}const g=t("strapi:auth:provider:users-permissions"),m="/auth/local";class b extends e{static identifier="users-permissions";_token=null;constructor(t){super(t)}get name(){return b.identifier}get _credentials(){return{identifier:this._options.identifier,password:this._options.password}}preflightValidation(){if(g("validating provider configuration"),void 0===this._options||null===this._options||"object"!=typeof this._options)throw g("invalid options provided: %s (%s)",this._options,typeof this._options),new n("Missing valid options for initializing the Users & Permissions auth provider.");const{identifier:t,password:e}=this._options;if("string"!=typeof t)throw g("invalid identifier provided: %s (%s)",t,typeof t),new n(`The "identifier" option must be a string, but got "${typeof t}"`);if("string"!=typeof e)throw g("invalid password provided: %s (%s)",e,typeof e),new n(`The "password" option must be a string, but got "${typeof e}"`);g("provider configuration validated successfully")}get headers(){return null===this._token?{}:{Authorization:`Bearer ${this._token}`}}async authenticate(t){const{identifier:e,password:r}=this._credentials;g("trying to authenticate with %o as %o at %o ",this.name,e,m);const n=await t.post(m,JSON.stringify({identifier:e,password:r}),{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(n.statusText);const o=await n.json(),i=o.jwt.slice(0,5)+"..."+o.jwt.slice(-5);g("authentication successful for %o (%o)",e,i),this._token=o.jwt}}const w=t("strapi:auth:factory");class v{_registry=new Map;create(t,e){const n=this._registry.get(t);if(!n)throw w("the %o auth strategy is not registered, skipping",t),new r(`Auth strategy "${t}" is not supported.`);const o=n(e);return w("successfully instantiated a new %o provider",t),o}register(t,e){return this._registry.set(t,e),w("registered a new auth strategy: %o",t),this}}const _=t("strapi:auth:manager");class S{_authProviderFactory;_authProvider;_isAuthenticated=!1;constructor(t=new v){_("initializing a new auth manager"),this._authProviderFactory=t,this.registerDefaultProviders()}get strategy(){return this._authProvider?.name}get isAuthenticated(){return this._isAuthenticated}handleUnauthorizedError(){_("unauthorized error encountered, resetting authentication status"),this._isAuthenticated=!1}setStrategy(t,e){_("setting strategy to %o",t),this._authProvider=this._authProviderFactory.create(t,e)}async authenticate(t){if(void 0===this._authProvider)return _("no auth provider is set, skipping authentication"),void(this._isAuthenticated=!1);try{_("trying to authenticate with %s",this._authProvider.name);const e=t.create(void 0,!1);await this._authProvider.authenticate(e),this._isAuthenticated=!0,_("authentication successful")}catch(t){_(`authentication failed: ${t}`),this._isAuthenticated=!1}}authenticateRequest(t){if(!this._authProvider)return;const{headers:e}=t;if(!(e instanceof Headers))throw new Error(`Invalid request headers, headers must be an instance of Headers but found "${typeof e}"`);for(const[t,r]of Object.entries(this._authProvider.headers))e.set(t,r)}registerDefaultProviders(){_("registering default authentication providers"),this._authProviderFactory.register(h.identifier,(t=>new h(t))).register(b.identifier,(t=>new b(t))),_("default authentication providers registered successfully")}}var E,A,O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function j(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}function R(){return A?E:(A=1,E=TypeError)}var T,x,N,I,D,U,k,F,L,C,M,$,q,B,H,z,W,V,Q,K,G,J,Z,Y,X,tt,et,rt,nt,ot,it,at,st,ut,lt,ct,pt,ft,yt,dt,ht,gt,mt,bt,wt,vt,_t,St,Et,At,Ot,Pt,jt,Rt,Tt,xt,Nt,It,Dt,Ut,kt,Ft,Lt,Ct,Mt,$t,qt,Bt,Ht,zt,Wt,Vt,Qt,Kt,Gt,Jt,Zt=j(Object.freeze({__proto__:null,default:{}}));function Yt(){if(x)return T;x=1;var t="function"==typeof Map&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&"function"==typeof e.get?e.get:null,n=t&&Map.prototype.forEach,o="function"==typeof Set&&Set.prototype,i=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=o&&i&&"function"==typeof i.get?i.get:null,s=o&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,l="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,c="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,f=Object.prototype.toString,y=Function.prototype.toString,d=String.prototype.match,h=String.prototype.slice,g=String.prototype.replace,m=String.prototype.toUpperCase,b=String.prototype.toLowerCase,w=RegExp.prototype.test,v=Array.prototype.concat,_=Array.prototype.join,S=Array.prototype.slice,E=Math.floor,A="function"==typeof BigInt?BigInt.prototype.valueOf:null,P=Object.getOwnPropertySymbols,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===R||"symbol")?Symbol.toStringTag:null,I=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function U(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||w.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-E(-t):E(t);if(n!==t){var o=String(n),i=h.call(e,o.length+1);return g.call(o,r,"$&_")+"."+g.call(g.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(e,r,"$&_")}var k=Zt,F=k.custom,L=z(F)?F:null,C={__proto__:null,double:'"',single:"'"},M={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function $(t,e,r){var n=r.quoteStyle||e,o=C[n];return o+t+o}function q(t){return g.call(String(t),/"/g,"&quot;")}function B(t){return!("[object Array]"!==Q(t)||N&&"object"==typeof t&&N in t)}function H(t){return!("[object RegExp]"!==Q(t)||N&&"object"==typeof t&&N in t)}function z(t){if(R)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!j)return!1;try{return j.call(t),!0}catch(t){}return!1}T=function t(e,o,i,f){var m=o||{};if(V(m,"quoteStyle")&&!V(C,m.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(m,"maxStringLength")&&("number"==typeof m.maxStringLength?m.maxStringLength<0&&m.maxStringLength!==1/0:null!==m.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=!V(m,"customInspect")||m.customInspect;if("boolean"!=typeof w&&"symbol"!==w)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(m,"indent")&&null!==m.indent&&"\t"!==m.indent&&!(parseInt(m.indent,10)===m.indent&&m.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(m,"numericSeparator")&&"boolean"!=typeof m.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var E=m.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return G(e,m);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var P=String(e);return E?U(e,P):P}if("bigint"==typeof e){var T=String(e)+"n";return E?U(e,T):T}var x=void 0===m.depth?5:m.depth;if(void 0===i&&(i=0),i>=x&&x>0&&"object"==typeof e)return B(e)?"[Array]":"[Object]";var F=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=_.call(Array(t.indent+1)," ")}return{base:r,prev:_.call(Array(e+1),r)}}(m,i);if(void 0===f)f=[];else if(K(f,e)>=0)return"[Circular]";function M(e,r,n){if(r&&(f=S.call(f)).push(r),n){var o={depth:m.depth};return V(m,"quoteStyle")&&(o.quoteStyle=m.quoteStyle),t(e,o,i+1,f)}return t(e,m,i+1,f)}if("function"==typeof e&&!H(e)){var W=function(t){if(t.name)return t.name;var e=d.call(y.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),J=et(e,M);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(J.length>0?" { "+_.call(J,", ")+" }":"")}if(z(e)){var rt=R?g.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(e);return"object"!=typeof e||R?rt:Z(rt)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var nt="<"+b.call(String(e.nodeName)),ot=e.attributes||[],it=0;it<ot.length;it++)nt+=" "+ot[it].name+"="+$(q(ot[it].value),"double",m);return nt+=">",e.childNodes&&e.childNodes.length&&(nt+="..."),nt+="</"+b.call(String(e.nodeName))+">"}if(B(e)){if(0===e.length)return"[]";var at=et(e,M);return F&&!function(t){for(var e=0;e<t.length;e++)if(K(t[e],"\n")>=0)return!1;return!0}(at)?"["+tt(at,F)+"]":"[ "+_.call(at,", ")+" ]"}if(function(t){return!("[object Error]"!==Q(t)||N&&"object"==typeof t&&N in t)}(e)){var st=et(e,M);return"cause"in Error.prototype||!("cause"in e)||I.call(e,"cause")?0===st.length?"["+String(e)+"]":"{ ["+String(e)+"] "+_.call(st,", ")+" }":"{ ["+String(e)+"] "+_.call(v.call("[cause]: "+M(e.cause),st),", ")+" }"}if("object"==typeof e&&w){if(L&&"function"==typeof e[L]&&k)return k(e,{depth:x-i});if("symbol"!==w&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!r||!t||"object"!=typeof t)return!1;try{r.call(t);try{a.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var ut=[];return n&&n.call(e,(function(t,r){ut.push(M(r,e,!0)+" => "+M(t,e))})),X("Map",r.call(e),ut,F)}if(function(t){if(!a||!t||"object"!=typeof t)return!1;try{a.call(t);try{r.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var lt=[];return s&&s.call(e,(function(t){lt.push(M(t,e))})),X("Set",a.call(e),lt,F)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t,u);try{l.call(t,l)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Y("WeakMap");if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t,l);try{u.call(t,u)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Y("WeakSet");if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{return c.call(t),!0}catch(t){}return!1}(e))return Y("WeakRef");if(function(t){return!("[object Number]"!==Q(t)||N&&"object"==typeof t&&N in t)}(e))return Z(M(Number(e)));if(function(t){if(!t||"object"!=typeof t||!A)return!1;try{return A.call(t),!0}catch(t){}return!1}(e))return Z(M(A.call(e)));if(function(t){return!("[object Boolean]"!==Q(t)||N&&"object"==typeof t&&N in t)}(e))return Z(p.call(e));if(function(t){return!("[object String]"!==Q(t)||N&&"object"==typeof t&&N in t)}(e))return Z(M(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==O&&e===O)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==Q(t)||N&&"object"==typeof t&&N in t)}(e)&&!H(e)){var ct=et(e,M),pt=D?D(e)===Object.prototype:e instanceof Object||e.constructor===Object,ft=e instanceof Object?"":"null prototype",yt=!pt&&N&&Object(e)===e&&N in e?h.call(Q(e),8,-1):ft?"Object":"",dt=(pt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(yt||ft?"["+_.call(v.call([],yt||[],ft||[]),": ")+"] ":"");return 0===ct.length?dt+"{}":F?dt+"{"+tt(ct,F)+"}":dt+"{ "+_.call(ct,", ")+" }"}return String(e)};var W=Object.prototype.hasOwnProperty||function(t){return t in this};function V(t,e){return W.call(t,e)}function Q(t){return f.call(t)}function K(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function G(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return G(h.call(t,0,e.maxStringLength),e)+n}var o=M[e.quoteStyle||"single"];return o.lastIndex=0,$(g.call(g.call(t,o,"\\$1"),/[\x00-\x1f]/g,J),"single",e)}function J(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+m.call(e.toString(16))}function Z(t){return"Object("+t+")"}function Y(t){return t+" { ? }"}function X(t,e,r,n){return t+" ("+e+") {"+(n?tt(r,n):_.call(r,", "))+"}"}function tt(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+_.call(t,","+r)+"\n"+e.prev}function et(t,e){var r=B(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=V(t,o)?e(t[o],t):""}var i,a="function"==typeof P?P(t):[];if(R){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in t)V(t,u)&&(r&&String(Number(u))===u&&u<t.length||R&&i["$"+u]instanceof Symbol||(w.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof P)for(var l=0;l<a.length;l++)I.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}return T}function Xt(){if(I)return N;I=1;var t=Yt(),e=R(),r=function(t,e,r){for(var n,o=t;null!=(n=o.next);o=n)if(n.key===e)return o.next=n.next,r||(n.next=t.next,t.next=n),n};return N=function(){var n,o={assert:function(r){if(!o.has(r))throw new e("Side channel does not contain "+t(r))},delete:function(t){var e=n&&n.next,o=function(t,e){if(t)return r(t,e,!0)}(n,t);return o&&e&&e===o&&(n=void 0),!!o},get:function(t){return function(t,e){if(t){var n=r(t,e);return n&&n.value}}(n,t)},has:function(t){return function(t,e){return!!t&&!!r(t,e)}(n,t)},set:function(t,e){n||(n={next:void 0}),function(t,e,n){var o=r(t,e);o?o.value=n:t.next={key:e,next:t.next,value:n}}(n,t,e)}};return o}}function te(){return U?D:(U=1,D=Object)}function ee(){return F?k:(F=1,k=Error)}function re(){return C?L:(C=1,L=EvalError)}function ne(){return $?M:($=1,M=RangeError)}function oe(){return B?q:(B=1,q=ReferenceError)}function ie(){return z?H:(z=1,H=SyntaxError)}function ae(){return V?W:(V=1,W=URIError)}function se(){return K?Q:(K=1,Q=Math.abs)}function ue(){return J?G:(J=1,G=Math.floor)}function le(){return Y?Z:(Y=1,Z=Math.max)}function ce(){return tt?X:(tt=1,X=Math.min)}function pe(){return rt?et:(rt=1,et=Math.pow)}function fe(){return ot?nt:(ot=1,nt=Object.getOwnPropertyDescriptor)}function ye(){if(at)return it;at=1;var t=fe();if(t)try{t([],"length")}catch(e){t=null}return it=t}function de(){if(ut)return st;ut=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}return st=t}function he(){if(ft)return pt;ft=1;var t="undefined"!=typeof Symbol&&Symbol,e=ct?lt:(ct=1,lt=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return pt=function(){return"function"==typeof t&&("function"==typeof Symbol&&("symbol"==typeof t("foo")&&("symbol"==typeof Symbol("bar")&&e())))}}function ge(){if(dt)return yt;dt=1;var t=Object.prototype.toString,e=Math.max,r=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r};return yt=function(n){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(t,e){for(var r=[],n=e,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments,1),s=e(0,o.length-a.length),u=[],l=0;l<s;l++)u[l]="$"+l;if(i=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,r(a,arguments));return Object(t)===t?t:this}return o.apply(n,r(a,arguments))})),o.prototype){var c=function(){};c.prototype=o.prototype,i.prototype=new c,c.prototype=null}return i},yt}function me(){if(gt)return ht;gt=1;var t=ge();return ht=Function.prototype.bind||t}function be(){return bt?mt:(bt=1,mt=Function.prototype.call)}function we(){return vt?wt:(vt=1,wt=Function.prototype.apply)}function ve(){if(At)return Et;At=1;var t=me(),e=we(),r=be(),n=St?_t:(St=1,_t="undefined"!=typeof Reflect&&Reflect&&Reflect.apply);return Et=n||t.call(r,e)}function _e(){if(Pt)return Ot;Pt=1;var t=me(),e=R(),r=be(),n=ve();return Ot=function(o){if(o.length<1||"function"!=typeof o[0])throw new e("a function is required");return n(t,r,o)}}function Se(){if(Rt)return jt;Rt=1;var t,e=_e(),r=ye();try{t=[].__proto__===Array.prototype}catch(t){if(!t||"object"!=typeof t||!("code"in t)||"ERR_PROTO_ACCESS"!==t.code)throw t}var n=!!t&&r&&r(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return jt=n&&"function"==typeof n.get?e([n.get]):"function"==typeof i&&function(t){return i(null==t?t:o(t))}}function Ee(){if(xt)return Tt;xt=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=me();return Tt=r.call(t,e)}function Ae(){if(It)return Nt;var t;It=1;var e=te(),r=ee(),n=re(),o=ne(),i=oe(),a=ie(),s=R(),u=ae(),l=se(),c=ue(),p=le(),f=ce(),y=pe(),d=Function,h=function(t){try{return d('"use strict"; return ('+t+").constructor;")()}catch(t){}},g=ye(),m=de(),b=function(){throw new s},w=g?function(){try{return b}catch(t){try{return g(arguments,"callee").get}catch(t){return b}}}():b,v=he()(),_=Se(),S="function"==typeof Reflect&&Reflect.getPrototypeOf||e.getPrototypeOf||_,E=we(),A=be(),O={},P="undefined"!=typeof Uint8Array&&S?S(Uint8Array):t,j={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?t:ArrayBuffer,"%ArrayIteratorPrototype%":v&&S?S([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":"undefined"==typeof Atomics?t:Atomics,"%BigInt%":"undefined"==typeof BigInt?t:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?t:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?t:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?t:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?t:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":O,"%Int8Array%":"undefined"==typeof Int8Array?t:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?t:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&S?S(S([][Symbol.iterator]())):t,"%JSON%":"object"==typeof JSON?JSON:t,"%Map%":"undefined"==typeof Map?t:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v&&S?S((new Map)[Symbol.iterator]()):t,"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":g,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?t:Promise,"%Proxy%":"undefined"==typeof Proxy?t:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?t:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?t:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v&&S?S((new Set)[Symbol.iterator]()):t,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&S?S(""[Symbol.iterator]()):t,"%Symbol%":v?Symbol:t,"%SyntaxError%":a,"%ThrowTypeError%":w,"%TypedArray%":P,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?t:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?t:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?t:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?t:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?t:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?t:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?t:WeakSet,"%Function.prototype.call%":A,"%Function.prototype.apply%":E,"%Object.defineProperty%":m,"%Math.abs%":l,"%Math.floor%":c,"%Math.max%":p,"%Math.min%":f,"%Math.pow%":y};if(S)try{null.error}catch(t){var T=S(S(t));j["%Error.prototype%"]=T}var x=function t(e){var r;if("%AsyncFunction%"===e)r=h("async function () {}");else if("%GeneratorFunction%"===e)r=h("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=h("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&S&&(r=S(o.prototype))}return j[e]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=me(),D=Ee(),U=I.call(A,Array.prototype.concat),k=I.call(E,Array.prototype.splice),F=I.call(A,String.prototype.replace),L=I.call(A,String.prototype.slice),C=I.call(A,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,q=function(t,e){var r,n=t;if(D(N,n)&&(n="%"+(r=N[n])[0]+"%"),D(j,n)){var o=j[n];if(o===O&&(o=x(n)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+t+" does not exist!")};return Nt=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,t))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=L(t,0,1),r=L(t,-1);if("%"===e&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return F(t,M,(function(t,e,r,o){n[n.length]=r?F(o,$,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=q("%"+n+"%",e),i=o.name,u=o.value,l=!1,c=o.alias;c&&(n=c[0],k(r,U([0,1],c)));for(var p=1,f=!0;p<r.length;p+=1){var y=r[p],d=L(y,0,1),h=L(y,-1);if(('"'===d||"'"===d||"`"===d||'"'===h||"'"===h||"`"===h)&&d!==h)throw new a("property names with quotes must have matching quotes");if("constructor"!==y&&f||(l=!0),D(j,i="%"+(n+="."+y)+"%"))u=j[i];else if(null!=u){if(!(y in u)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(g&&p+1>=r.length){var m=g(u,y);u=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[y]}else f=D(u,y),u=u[y];f&&!l&&(j[i]=u)}}return u},Nt}function Oe(){if(Ut)return Dt;Ut=1;var t=Ae(),e=_e(),r=e([t("%String.prototype.indexOf%")]);return Dt=function(n,o){var i=t(n,!!o);return"function"==typeof i&&r(n,".prototype.")>-1?e([i]):i}}function Pe(){if(Ft)return kt;Ft=1;var t=Ae(),e=Oe(),r=Yt(),n=R(),o=t("%Map%",!0),i=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),s=e("Map.prototype.has",!0),u=e("Map.prototype.delete",!0),l=e("Map.prototype.size",!0);return kt=!!o&&function(){var t,e={assert:function(t){if(!e.has(t))throw new n("Side channel does not contain "+r(t))},delete:function(e){if(t){var r=u(t,e);return 0===l(t)&&(t=void 0),r}return!1},get:function(e){if(t)return i(t,e)},has:function(e){return!!t&&s(t,e)},set:function(e,r){t||(t=new o),a(t,e,r)}};return e}}function je(){if($t)return Mt;$t=1;var t=R(),e=Yt(),r=Xt(),n=Pe(),o=function(){if(Ct)return Lt;Ct=1;var t=Ae(),e=Oe(),r=Yt(),n=Pe(),o=R(),i=t("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),s=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),l=e("WeakMap.prototype.delete",!0);return Lt=i?function(){var t,e,c={assert:function(t){if(!c.has(t))throw new o("Side channel does not contain "+r(t))},delete:function(r){if(i&&r&&("object"==typeof r||"function"==typeof r)){if(t)return l(t,r)}else if(n&&e)return e.delete(r);return!1},get:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&t?a(t,r):e&&e.get(r)},has:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&t?u(t,r):!!e&&e.has(r)},set:function(r,o){i&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new i),s(t,r,o)):n&&(e||(e=n()),e.set(r,o))}};return c}:n}(),i=o||n||r;return Mt=function(){var r,n={assert:function(r){if(!n.has(r))throw new t("Side channel does not contain "+e(r))},delete:function(t){return!!r&&r.delete(t)},get:function(t){return r&&r.get(t)},has:function(t){return!!r&&r.has(t)},set:function(t,e){r||(r=i()),r.set(t,e)}};return n}}function Re(){if(Bt)return qt;Bt=1;var t=String.prototype.replace,e=/%20/g,r="RFC3986";return qt={default:r,formatters:{RFC1738:function(r){return t.call(r,e,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:r}}function Te(){if(zt)return Ht;zt=1;var t=Re(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t,e){for(var r=e&&e.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},i=1024;return Ht={arrayToObject:o,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],o=0;o<e.length;++o)for(var i=e[o],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],c=a[l];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:a,prop:l}),n.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(r(n)){for(var o=[],i=0;i<n.length;++i)void 0!==n[i]&&o.push(n[i]);e.obj[e.prop]=o}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(e,r,o,a,s){if(0===e.length)return e;var u=e;if("symbol"==typeof e?u=Symbol.prototype.toString.call(e):"string"!=typeof e&&(u=String(e)),"iso-8859-1"===o)return escape(u).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var l="",c=0;c<u.length;c+=i){for(var p=u.length>=i?u.slice(c,c+i):u,f=[],y=0;y<p.length;++y){var d=p.charCodeAt(y);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===t.RFC1738&&(40===d||41===d)?f[f.length]=p.charAt(y):d<128?f[f.length]=n[d]:d<2048?f[f.length]=n[192|d>>6]+n[128|63&d]:d<55296||d>=57344?f[f.length]=n[224|d>>12]+n[128|d>>6&63]+n[128|63&d]:(y+=1,d=65536+((1023&d)<<10|1023&p.charCodeAt(y)),f[f.length]=n[240|d>>18]+n[128|d>>12&63]+n[128|d>>6&63]+n[128|63&d])}l+=f.join("")}return l},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(r(t)){for(var n=[],o=0;o<t.length;o+=1)n.push(e(t[o]));return n}return e(t)},merge:function t(n,i,a){if(!i)return n;if("object"!=typeof i&&"function"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(a&&(a.plainObjects||a.allowPrototypes)||!e.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var s=n;return r(n)&&!r(i)&&(s=o(n,a)),r(n)&&r(i)?(i.forEach((function(r,o){if(e.call(n,o)){var i=n[o];i&&"object"==typeof i&&r&&"object"==typeof r?n[o]=t(i,r,a):n.push(r)}else n[o]=r})),n):Object.keys(i).reduce((function(r,n){var o=i[n];return e.call(r,n)?r[n]=t(r[n],o,a):r[n]=o,r}),s)}},Ht}function xe(){if(Vt)return Wt;Vt=1;var t=je(),e=Te(),r=Re(),n=Object.prototype.hasOwnProperty,o={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},i=Array.isArray,a=Array.prototype.push,s=function(t,e){a.apply(t,i(e)?e:[e])},u=Date.prototype.toISOString,l=r.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:l,formatter:r.formatters[l],indices:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},p={},f=function r(n,o,a,u,l,f,y,d,h,g,m,b,w,v,_,S,E,A){for(var O,P=n,j=A,R=0,T=!1;void 0!==(j=j.get(p))&&!T;){var x=j.get(n);if(R+=1,void 0!==x){if(x===R)throw new RangeError("Cyclic object value");T=!0}void 0===j.get(p)&&(R=0)}if("function"==typeof g?P=g(o,P):P instanceof Date?P=w(P):"comma"===a&&i(P)&&(P=e.maybeMap(P,(function(t){return t instanceof Date?w(t):t}))),null===P){if(f)return h&&!S?h(o,c.encoder,E,"key",v):o;P=""}if("string"==typeof(O=P)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||e.isBuffer(P))return h?[_(S?o:h(o,c.encoder,E,"key",v))+"="+_(h(P,c.encoder,E,"value",v))]:[_(o)+"="+_(String(P))];var N,I=[];if(void 0===P)return I;if("comma"===a&&i(P))S&&h&&(P=e.maybeMap(P,h)),N=[{value:P.length>0?P.join(",")||null:void 0}];else if(i(g))N=g;else{var D=Object.keys(P);N=m?D.sort(m):D}var U=d?String(o).replace(/\./g,"%2E"):String(o),k=u&&i(P)&&1===P.length?U+"[]":U;if(l&&i(P)&&0===P.length)return k+"[]";for(var F=0;F<N.length;++F){var L=N[F],C="object"==typeof L&&L&&void 0!==L.value?L.value:P[L];if(!y||null!==C){var M=b&&d?String(L).replace(/\./g,"%2E"):String(L),$=i(P)?"function"==typeof a?a(k,M):k:k+(b?"."+M:"["+M+"]");A.set(n,R);var q=t();q.set(p,A),s(I,r(C,$,a,u,l,f,y,d,"comma"===a&&S&&i(P)?null:h,g,m,b,w,v,_,S,E,q))}}return I};return Wt=function(e,a){var u,l=e,p=function(t){if(!t)return c;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||c.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=r.default;if(void 0!==t.format){if(!n.call(r.formatters,t.format))throw new TypeError("Unknown format option provided.");a=t.format}var s,u=r.formatters[a],l=c.filter;if(("function"==typeof t.filter||i(t.filter))&&(l=t.filter),s=t.arrayFormat in o?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":c.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var p=void 0===t.allowDots?!0===t.encodeDotInKeys||c.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:c.addQueryPrefix,allowDots:p,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:c.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:void 0===t.delimiter?c.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:c.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:c.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:c.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:c.encodeValuesOnly,filter:l,format:a,formatter:u,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:c.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:c.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:c.strictNullHandling}}(a);"function"==typeof p.filter?l=(0,p.filter)("",l):i(p.filter)&&(u=p.filter);var y=[];if("object"!=typeof l||null===l)return"";var d=o[p.arrayFormat],h="comma"===d&&p.commaRoundTrip;u||(u=Object.keys(l)),p.sort&&u.sort(p.sort);for(var g=t(),m=0;m<u.length;++m){var b=u[m],w=l[b];p.skipNulls&&null===w||s(y,f(w,b,d,h,p.allowEmptyArrays,p.strictNullHandling,p.skipNulls,p.encodeDotInKeys,p.encode?p.encoder:null,p.filter,p.sort,p.allowDots,p.serializeDate,p.format,p.formatter,p.encodeValuesOnly,p.charset,g))}var v=y.join(p.delimiter),_=!0===p.addQueryPrefix?"?":"";return p.charsetSentinel&&("iso-8859-1"===p.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""},Wt}function Ne(){if(Kt)return Qt;Kt=1;var t=Te(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},o=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},i=function(t,e,r){if(t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(1===e.arrayLimit?"":"s")+" allowed in an array.");return t},a=function(r,n,o,a){if(r){var s=o.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,u=/(\[[^[\]]*])/g,l=o.depth>0&&/(\[[^[\]]*])/.exec(s),c=l?s.slice(0,l.index):s,p=[];if(c){if(!o.plainObjects&&e.call(Object.prototype,c)&&!o.allowPrototypes)return;p.push(c)}for(var f=0;o.depth>0&&null!==(l=u.exec(s))&&f<o.depth;){if(f+=1,!o.plainObjects&&e.call(Object.prototype,l[1].slice(1,-1))&&!o.allowPrototypes)return;p.push(l[1])}if(l){if(!0===o.strictDepth)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");p.push("["+s.slice(l.index)+"]")}return function(e,r,n,o){var a=0;if(e.length>0&&"[]"===e[e.length-1]){var s=e.slice(0,-1).join("");a=Array.isArray(r)&&r[s]?r[s].length:0}for(var u=o?r:i(r,n,a),l=e.length-1;l>=0;--l){var c,p=e[l];if("[]"===p&&n.parseArrays)c=n.allowEmptyArrays&&(""===u||n.strictNullHandling&&null===u)?[]:t.combine([],u);else{c=n.plainObjects?{__proto__:null}:{};var f="["===p.charAt(0)&&"]"===p.charAt(p.length-1)?p.slice(1,-1):p,y=n.decodeDotInKeys?f.replace(/%2E/g,"."):f,d=parseInt(y,10);n.parseArrays||""!==y?!isNaN(d)&&p!==y&&String(d)===y&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(c=[])[d]=u:"__proto__"!==y&&(c[y]=u):c={0:u}}u=c}return u}(p,n,o,a)}};return Qt=function(s,u){var l=function(e){if(!e)return n;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=void 0===e.charset?n.charset:e.charset,o=void 0===e.duplicates?n.duplicates:e.duplicates;if("combine"!==o&&"first"!==o&&"last"!==o)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||n.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:n.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:n.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:n.decoder,delimiter:"string"==typeof e.delimiter||t.isRegExp(e.delimiter)?e.delimiter:n.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:n.depth,duplicates:o,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:n.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}}(u);if(""===s||null==s)return l.plainObjects?{__proto__:null}:{};for(var c="string"==typeof s?function(a,s){var u={__proto__:null},l=s.ignoreQueryPrefix?a.replace(/^\?/,""):a;l=l.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c=s.parameterLimit===1/0?void 0:s.parameterLimit,p=l.split(s.delimiter,s.throwOnLimitExceeded?c+1:c);if(s.throwOnLimitExceeded&&p.length>c)throw new RangeError("Parameter limit exceeded. Only "+c+" parameter"+(1===c?"":"s")+" allowed.");var f,y=-1,d=s.charset;if(s.charsetSentinel)for(f=0;f<p.length;++f)0===p[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[f]?d="utf-8":"utf8=%26%2310003%3B"===p[f]&&(d="iso-8859-1"),y=f,f=p.length);for(f=0;f<p.length;++f)if(f!==y){var h,g,m=p[f],b=m.indexOf("]="),w=-1===b?m.indexOf("="):b+1;-1===w?(h=s.decoder(m,n.decoder,d,"key"),g=s.strictNullHandling?null:""):(h=s.decoder(m.slice(0,w),n.decoder,d,"key"),g=t.maybeMap(i(m.slice(w+1),s,r(u[h])?u[h].length:0),(function(t){return s.decoder(t,n.decoder,d,"value")}))),g&&s.interpretNumericEntities&&"iso-8859-1"===d&&(g=o(String(g))),m.indexOf("[]=")>-1&&(g=r(g)?[g]:g);var v=e.call(u,h);v&&"combine"===s.duplicates?u[h]=t.combine(u[h],g):v&&"last"!==s.duplicates||(u[h]=g)}return u}(s,l):s,p=l.plainObjects?{__proto__:null}:{},f=Object.keys(c),y=0;y<f.length;++y){var d=f[y],h=a(d,c[d],l,"string"==typeof s);p=t.merge(p,h,l)}return!0===l.allowSparse?p:t.compact(p)}}function Ie(){if(Jt)return Gt;Jt=1;var t=xe(),e=Ne();return Gt={formats:Re(),parse:e,stringify:t}}var De=P(Ie());const Ue=t("strapi:utils:url-helper");class ke{static appendQueryParams(t,e){if(Ue("appending query params to %o: %o",t,e),!e)return Ue("no query params provided, returning original URL: %o",t),t;const r=ke.stringifyQueryParams(e);return r?URL.canParse(t)&&new URL(t).search?`${t}&${r}`:`${t}?${r}`:(Ue("generated an empty query string, skipping..."),t)}static stringifyQueryParams(t){return De.stringify(t,{addQueryPrefix:!1,allowEmptyArrays:!0})}static toReadablePath(t){const e=t instanceof URL?t:new URL(t);return`${e.origin}${e.pathname}`}}class Fe{static format(t){if(!(t instanceof Request))throw new TypeError("Invalid input, expected a Request instance but found "+typeof t);return`${t.method} - ${ke.toReadablePath(t.url)}`}}const Le=t("strapi:ct:single");class Ce{_singularName;_httpClient;constructor(t,e){this._singularName=t,this._httpClient=e,Le("initialized manager for %o",t)}async find(t){Le("finding document for %o",this._singularName);let e=`/${this._singularName}`;t&&(e=ke.appendQueryParams(e,t));const r=await this._httpClient.get(e);return Le("the %o document has been fetched",this._singularName),r.json()}async update(t,e){Le("updating document for %o",this._singularName);let r=`/${this._singularName}`;e&&(r=ke.appendQueryParams(r,e));const n=await this._httpClient.put(r,JSON.stringify({data:t}),{headers:{"Content-Type":"application/json"}});return Le("the %o document has been updated",this._singularName),n.json()}async delete(t){Le("deleting document for %o",this._singularName);let e=`/${this._singularName}`;t&&(e=ke.appendQueryParams(e,t)),await this._httpClient.delete(e),Le("the %o document has been deleted",this._singularName)}}const Me=t("strapi:ct:collection");class $e{_pluralName;_httpClient;constructor(t,e){this._pluralName=t,this._httpClient=e,Me("initialized manager for %o",t)}async find(t){Me("finding documents for %o",this._pluralName);let e=`/${this._pluralName}`;t&&(e=ke.appendQueryParams(e,t));const r=await this._httpClient.get(e),n=await r.json();return Me("found %o %o documents",Number(n?.data?.length),this._pluralName),n}async findOne(t,e){Me("finding a document for %o with id: %o",this._pluralName,t);let r=`/${this._pluralName}/${t}`;e&&(r=ke.appendQueryParams(r,e));const n=await this._httpClient.get(r);return Me("found the %o document with document id %o",this._pluralName,t),n.json()}async create(t,e){Me("creating a document for %o",this._pluralName);let r=`/${this._pluralName}`;e&&(r=ke.appendQueryParams(r,e));const n=await this._httpClient.post(r,JSON.stringify({data:t}),{headers:{"Content-Type":"application/json"}});return Me("created the %o document",this._pluralName),n.json()}async update(t,e,r){Me("updating a document for %o with id: %o",this._pluralName,t);let n=`/${this._pluralName}/${t}`;r&&(n=ke.appendQueryParams(n,r));const o=await this._httpClient.put(n,JSON.stringify({data:e}),{headers:{"Content-Type":"application/json"}});return Me("updated the %o document with id %o",this._pluralName,t),o.json()}async delete(t,e){Me("deleting a document for %o with id: %o",this._pluralName,t);let r=`/${this._pluralName}/${t}`;e&&(r=ke.appendQueryParams(r,e)),await this._httpClient.delete(r),Me("deleted the %o document with id %o",this._pluralName,t)}}class qe extends l{name="FileNotFoundError";fileId;constructor(t,e){super(e.response,e.request),this.fileId=t,this.message=`File with ID ${t} not found. The requested file may have been deleted or never existed.`}}class Be extends f{name="FileForbiddenError";fileId;constructor(t,e){super(t.response,t.request),this.fileId=e,this.message=void 0!==e?`Access to file with ID ${e} is forbidden. You may not have sufficient permissions.`:"Access to files is forbidden. You may not have sufficient permissions."}}class He{static createMapper(t){return e=>e instanceof l?void 0!==t?new qe(t,e):e:e instanceof f?new Be(e,t):e}}const ze="/upload",We=t("strapi:files");class Ve{_httpClient;constructor(t){this._httpClient=t,We("initialized files manager")}createFileHttpClient(t){const e=this._httpClient.create(),r=He.createMapper(t);return e.interceptors.response.use(void 0,(t=>{if(t instanceof Error)throw r(t);throw t})),e}async find(t){We("finding files");try{let e=`${ze}/files`;t&&(e=ke.appendQueryParams(e,t));const r=this.createFileHttpClient(),n=await r.get(e),o=await n.json();return We("found %o files",Number(o?.length)),o}catch(t){throw We("error finding files: %o",t),t}}async findOne(t){We("finding file with ID %o",t);const e=`${ze}/files/${t}`,r=this.createFileHttpClient(t);try{const n=await r.get(e),o=await n.json();return We("found file with ID %o",t),o}catch(e){throw We("error finding file with ID %o: %o",t,e),e}}async update(t,e){We("updating file with ID %o with data %o",t,e);try{const r=`${ze}?id=${t}`,n=this.createFileHttpClient(t),o=new FormData;o.append("fileInfo",JSON.stringify(e));const i=await n.post(r,o),a=await i.json();return We("successfully updated file with ID %o",t),a}catch(e){throw We("error updating file with ID %o: %o",t,e),e}}async delete(t){We("deleting file with ID %o",t);try{const e=`${ze}/files/${t}`,r=this.createFileHttpClient(t),n=await r.delete(e),o=await n.json();return We("successfully deleted file with ID %o",t),o}catch(e){throw We("error deleting file with ID %o: %o",t,e),e}}}const Qe={trailingSlashes:!1,leadingSlashes:!1};class Ke{static format(t,e=Qe){return t=Ke.formatTrailingSlashes(t,e.trailingSlashes),t=Ke.formatLeadingSlashes(t,e.leadingSlashes)}static formatTrailingSlashes(t,e=Qe.trailingSlashes){return"single"===e?Ke.ensureSingleTrailingSlash(t):e?t:Ke.removeTrailingSlashes(t)}static removeTrailingSlashes(t){return t.replace(/\/+$/,"")}static ensureSingleTrailingSlash(t){return`${this.removeTrailingSlashes(t)}/`}static formatLeadingSlashes(t,e=Qe.leadingSlashes){return"single"===e?Ke.ensureSingleLeadingSlash(t):e?t:Ke.removeLeadingSlashes(t)}static removeLeadingSlashes(t){return t.replace(/^\/+/,"")}static ensureSingleLeadingSlash(t){return`/${this.removeLeadingSlashes(t)}`}}const Ge=t("strapi:validators:url");class Je{validate(t){if("string"!=typeof t)throw Ge("url must be a string, received: %o (%s)",t,typeof t),new a(t);if(!this.canParse(t))throw Ge("url could not be parsed: %o (%s)",t,typeof t),new a(t);Ge("validated url successfully: %o",t)}canParse(t){return URL.canParse(t)}}const Ze=t("strapi:validators:config");class Ye{_urlValidator;constructor(t=new Je){this._urlValidator=t}validateConfig(t){if(Ze("validating client config"),null==t||Array.isArray(t)||"object"!=typeof t)throw Ze("provided client configuration is not a valid object: %o (%s)",t,typeof t),new n(new TypeError("The provided configuration is not a valid object."));this.validateBaseURL(t.baseURL),Ze("validated client config successfully")}validateBaseURL(t){try{Ze("validating base url"),this._urlValidator.validate(t)}catch(e){if(e instanceof i)throw Ze("failed to validate client config, invalid base url %o",t),new n(e);throw e}}}var Xe;!function(t){t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.TIMEOUT=408]="TIMEOUT",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(Xe||(Xe={}));class tr{_handlers;constructor(t=[]){this._handlers=t}use(t,e){return this._handlers.push({fulfilled:t,rejected:e}),this}clone(){return new tr([...this._handlers])}async execute(t){let e=t;for(const t of this._handlers)try{t.fulfilled&&(e=await t.fulfilled(e))}catch(r){if(!t.rejected)throw r;e=await t.rejected(r)}return e}async reject(t){let e=t;for(const t of this._handlers)t.rejected&&(e=await t.rejected(e));return e}}const er=t("strapi:http");class rr{interceptors;_baseURL;_timeout;_headers;_urlValidator;constructor(t,e=new Je){er("initializing new client with base url: %o",t.baseURL),this._baseURL=Ke.format(t.baseURL,{trailingSlashes:!1}),this._timeout=t.timeout??1e4,this._headers=t.headers??{},this.interceptors={request:new tr,response:new tr},this._urlValidator=e,this._urlValidator.validate(this._baseURL)}get baseURL(){return this._baseURL}get timeout(){return this._timeout}get headers(){return this._headers}setBaseURL(t){return this._urlValidator.validate(t),this._baseURL=Ke.format(t,{trailingSlashes:!1}),er("setting new base url: %o",this._baseURL),this}setTimeout(t){if(er("setting new timeout: %o",t),!Number.isSafeInteger(t))throw new TypeError("Timeout must be a safe integer");return this._timeout=t,this}async request(t,e){const r=Ke.format(t,{leadingSlashes:"single"}),n=new URL(`${this.baseURL}${r}`),o=new Request(n,e);for(const[t,e]of Object.entries(this._headers))o.headers.append(t,e),er("%o header set to %o for %o",t,e,Fe.format(o));const{request:i}=await this.interceptors.request.execute({request:o}),a=new AbortController,s=setTimeout((()=>a.abort()),this._timeout),u=new Request(i,{signal:a.signal});try{const t=await this.fetch(u);clearTimeout(s);const{response:e}=await this.interceptors.response.execute({request:u,response:t});return e}catch(t){throw clearTimeout(s),await this.interceptors.response.reject(t)}}fetch(t,e){return globalThis.fetch(t,e)}async get(t,e){return this.request(t,{method:"GET",...e})}async post(t,e,r){return this.request(t,{method:"POST",body:e,...r})}async put(t,e,r){return this.request(t,{method:"PUT",body:e,...r})}async delete(t,e){return this.request(t,{method:"DELETE",...e})}create(t={},e=!0){const r=new(Object.getPrototypeOf(this).constructor)({baseURL:t.baseURL??this._baseURL,timeout:t.timeout??this._timeout,headers:t.headers??this._headers},this._urlValidator);if(!(r instanceof rr))throw new Error("The created instance is not an instance of HttpClient");return e&&(r.interceptors.request=this.interceptors.request.clone(),r.interceptors.response=this.interceptors.response.clone()),r}static mapResponseToHTTPError(t,e){switch(t.status){case Xe.BAD_REQUEST:return new c(t,e);case Xe.UNAUTHORIZED:return new u(t,e);case Xe.FORBIDDEN:return new f(t,e);case Xe.NOT_FOUND:return new l(t,e);case Xe.TIMEOUT:return new y(t,e);case Xe.INTERNAL_SERVER_ERROR:return new p(t,e)}return new s(t,e)}}class nr{static ensurePreAuthentication(t,e){return async({request:r})=>{const{strategy:n,isAuthenticated:o}=t;return n&&!o&&await t.authenticate(e),{request:r}}}static authenticateRequests(t){return({request:e})=>(t.authenticateRequest(e),{request:e})}static notifyOnUnauthorizedResponse(t){const e=()=>t.handleUnauthorizedError();return[({request:t,response:r})=>(!r.ok&&r.status===Xe.UNAUTHORIZED&&e(),{request:t,response:r}),t=>(t instanceof u&&e(),t)]}}class or{static setDefaultHeaders(){const t=new Map([["Content-Type","application/json"]]);return({request:e})=>{for(const[r,n]of t.entries()){e.headers.has(r)||e.headers.set(r,n)}return{request:e}}}static transformErrors(){return({request:t,response:e})=>{if(e.ok)return{request:t,response:e};throw rr.mapResponseToHTTPError(e,t)}}}const ir=t("strapi:core");class ar{_config;_validator;_authManager;_httpClient;files;constructor(t,e=new Ye,r=new S,n){this._config=t,this._validator=e,this._authManager=r,ir("started the initialization process"),this.preflightValidation(),ir("user config passed the preflight validation"),this._httpClient=n?n({baseURL:t.baseURL}):new rr({baseURL:t.baseURL}),this.files=new Ve(this._httpClient),this.init(),ir("finished the client initialization process")}preflightValidation(){try{ir("validating the configuration"),this._validator.validateConfig(this._config)}catch(t){throw new o(t)}}init(){ir("init modules"),this.initHttp(),this.initAuth()}initHttp(){ir("init http module"),this._httpClient.interceptors.request.use(or.setDefaultHeaders()),this._httpClient.interceptors.response.use(or.transformErrors())}initAuth(){if(ir("init auth module"),this.auth){const{strategy:t,options:e}=this.auth;ir("setting up the auth strategy using %o",t);try{this._authManager.setStrategy(t,e)}catch(t){throw new o(t,`Failed to initialize the client auth manager: ${t instanceof r?t.cause:t}`)}}this._httpClient.interceptors.request.use(nr.ensurePreAuthentication(this._authManager,this._httpClient)).use(nr.authenticateRequests(this._authManager)),this._httpClient.interceptors.response.use(...nr.notifyOnUnauthorizedResponse(this._authManager))}get auth(){return this._config.auth}get baseURL(){return this._config.baseURL}fetch(t,e){return this._httpClient.request(t,e)}collection(t){return new $e(t,this._httpClient)}single(t){return new Ce(t,this._httpClient)}}exports.HTTPAuthorizationError=u,exports.HTTPBadRequestError=c,exports.HTTPError=s,exports.HTTPForbiddenError=f,exports.HTTPInternalServerError=p,exports.HTTPNotFoundError=l,exports.HTTPTimeoutError=y,exports.StrapiError=r,exports.StrapiInitializationError=o,exports.StrapiValidationError=n,exports.URLParsingError=a,exports.URLValidationError=i,exports.strapi=t=>{const{baseURL:e,auth:r}=t,n={baseURL:e};return void 0!==r&&(n.auth={strategy:h.identifier,options:{token:r}}),new ar(n)};
